<html>
  <head>
    <title> Groups Information </title>
    <meta charset="UTF-8">
    <script>
      var baseurl = "http://172.31.6.4:8080/groups";
      function loadGroups(){
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET",baseurl + "/all",true);
/*         la funzione " onreadystatechange " è chiamata soltando quando il risultato
        è stato ricevuto dall'applicazione
        e allorquando il codice di ritorno della richiesta HTTP è 200 (ossia OK)
 */
        xmlhttp.onreadystatechange = function() {
          if(xmlhttp.readyState ===4 && xmlhttp.status ===200){
            var groups = JSON.parse(xmlhttp.responseText);
            var tbltop = `<table>
			    <tr><th>groupId</th><th>groupName</th><th>groupOwner</th><th>groupMembers</th>`;
            //main table content we fill from data from the rest call
            var main ="";
            for (i = 0; i < groups.length; i++){
              main += "<tr><td>"+groups[i].idGroup+"</td><td>"+groups[i].groupName+"</td>";
              main += "<td>"+groups[i].groupOwner.username+"</td><td>";
                main += "<td>";
                for(j=0; j< groups[i].members.length; j++){
                    main+= groups[i].members[j]+" ";
                }
                main+= "</td></tr>"
            }
            var tblbottom = "</table>";
            var tbl = tbltop + main + tblbottom;
            document.getElementById("groupsinfo").innerHTML = tbl;
          }
        };
        xmlhttp.send();
      }
      window.onload = function(){
        loadGroups();
      }
    </script>
  </head>
  <body>
    <div id="groupsinfo"> </div>
  </body>
</html>